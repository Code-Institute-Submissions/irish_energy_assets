{% extends 'base.html'%} {% block content %}


<div class="container filter_container col-xs-12 col-sm-3">
    <div class="filter_group refine_filter">
        <div class="row filter_header">
            <a data-toggle="collapse" href="#collapse_refine" role="button" aria-expanded="false" aria-controls="#collapse_refine">
                <div class="pull-left">
                    <h4>Refine Filter</h4>
                </div>
                <div class="pull-right">
                    <h4><i class="fas fa-chevron-circle-down"></i></h4>
                </div>
                <div class="clearfix"></div>
            </a>
        </div>
        <div class="collapse" id="collapse_refine">

            <form method="POST" action="{{ url_for('filtered_assets')}}">
                <button type="submit" class="btn add_asset-btn">Apply Filter</button>
                <button type="reset" class="btn add_asset-btn">Reset Filter</button>
                <div class="form-group row">
                    <label for="doc_sort">Sort by:</label>
                    <select class="form-control sort-by-selecter" name="doc_sort" id="doc_sort">
                        <option value="0">Name (A - Z)</option>
                        <option value="1">Name (Z - A)</option>
                        <option value="2">Type (A - Z)</option>
                        <option value="3">Type (Z - A)</option>
                        <option value="4">MEC (Low - High)</option>
                        <option value="5">MEC (High - Low)</option>
                    </select>
                </div>
                <div class="form-group row">
                    <label for="flt_search">Search</label>
                    <input type="search" name="flt_search" class="form-control search-input" id="flt_search" />
                </div>
                <div class="filter_group status">
                    <div class="row filter_header">
                        <a data-toggle="collapse" href="#collapse_status" role="button" aria-expanded="false" aria-controls="#collapse_status">
                            <div class="pull-left">
                                <h4>Status</h4>
                            </div>
                            <div class="pull-right">
                                <h4><i class="fas fa-chevron-circle-down"></i></h4>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="collapse filter_collapse in" id="collapse_status">
                        {% for status in statuses %}
                        <div class="checkbox">
                            <label><input type="checkbox" name="flt_status" value={{status['Name']}}>{{status['Name']}}   ({{status['Count']}})  ({{status['MEC_Sum']}}MW)</label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="filter_group system_operator">
                    <div class="row filter_header">
                        <a data-toggle="collapse" href="#collapse_system_operator" role="button" aria-expanded="false" aria-controls="#collapse_system_operator">
                            <div class="pull-left">
                                <h4>System Operator</h4>
                            </div>
                            <div class="pull-right">
                                <h4><i class="fas fa-chevron-circle-down"></i></h4>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="collapse filter_collapse in" id="collapse_system_operator">
                        {% for system_operator in system_operators %}
                        <div class="checkbox">
                            <label><input type="checkbox" name="flt_system_operator" value={{system_operator['Name']}}>{{system_operator['Name']}}   ({{system_operator['Count']}})  ({{system_operator['MEC_Sum']}}MW)</label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="filter_group types">
                    <div class="row filter_header">
                        <a data-toggle="collapse" href="#collapse_types" role="button" aria-expanded="false" aria-controls="#collapse_types">
                            <div class="pull-left">
                                <h4>Types</h4>
                            </div>
                            <div class="pull-right">
                                <h4><i class="fas fa-chevron-circle-down"></i></h4>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="collapse filter_collapse in" id="collapse_types">
                        {% for type in types %}
                        <div class="checkbox">
                            <label><input type="checkbox" name="flt_type" value={{type['Name']}}>{{type['Name']}}   ({{type['Count']}})  ({{type['MEC_Sum']}}MW)</label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="filter_group mec">
                    <div class="row filter_header">
                        <a data-toggle="collapse" href="#collapse_mec" role="button" aria-expanded="false" aria-controls="#collapse_mec">
                            <div class="pull-left">
                                <h4>Max Export Capacity</h4>
                            </div>
                            <div class="pull-right">
                                <h4><i class="fas fa-chevron-circle-down"></i></h4>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="collapse filter_collapse in" id="collapse_mec">
                        <div class="row">
                            <label for="flt_mec_lo" class="mec-range-field">from</label>
                            <input class="pull-right mec_range_input" autocomplete="off" id="flt_mec_lo" name="flt_mec_lo" data-pattern="range" data-role="to" type="number" pattern="[0-9]+(\.[0-9]{0,2})" maxlength="7" value="0">
                        </div>
                        <div class="row">
                            <label for="flt_mec_hi" class="mec-range-field last-child">to</label>
                            <input class="pull-right mec_range_input" autocomplete="off" id="flt_mec_hi" name="flt_mec_hi" data-pattern="range" data-role="to" type="number" pattern="[0-9]+(\.[0-9]{0,2})" maxlength="7" value="1000">
                        </div>
                    </div>
                </div>
                <div class="filter_group node">
                    <div class="row filter_header">
                        <a data-toggle="collapse" href="#collapse_node" role="button" aria-expanded="true" aria-controls="#collapse_node">
                            <div class="pull-left">
                                <h4>Node</h4>
                            </div>
                            <div class="pull-right">
                                <h4><i class="fas fa-chevron-circle-down"></i></h4>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="collapse filter_collapse" id="collapse_node">
                        {% for node in nodes %}
                        <div class="checkbox">
                            <label><input type="checkbox" name="flt_node" value={{node['Name']}}>{{node['Name']}}   ({{node['Count']}})  ({{node['MEC_Sum']}}MW)</label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="filter_group county">
                    <div class="row filter_header">
                        <a data-toggle="collapse" href="#collapse_county" role="button" aria-expanded="true" aria-controls="#collapse_county">
                            <div class="pull-left">
                                <h4>County</h4>
                            </div>
                            <div class="pull-right">
                                <h4><i class="fas fa-chevron-circle-down"></i></h4>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="collapse filter_collapse" id="collapse_county">

                        {% for county in counties %}
                        <div class="checkbox">
                            <label><input type="checkbox" name="flt_county" value={{county['Name']}}>{{county['Name']}}   ({{county['Count']}})  ({{county['MEC_Sum']}}MW)</label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="filter_group node">
                    <div class="row filter_header">
                        <a data-toggle="collapse" href="#collapse_node" role="button" aria-expanded="true" aria-controls="#collapse_node">
                            <div class="pull-left">
                                <h4>Node</h4>
                            </div>
                            <div class="pull-right">
                                <h4><i class="fas fa-chevron-circle-down"></i></h4>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="collapse filter_collapse" id="collapse_node">
                        {% for node in nodes %}
                        <div class="checkbox">
                            <label><input type="checkbox" name="flt_node" value={{node['Name']}}>{{node['Name']}}   ({{node['Count']}})  ({{node['MEC_Sum']}}MW)</label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="filter_group jurisdiction">
                    <div class="row filter_header">
                        <a data-toggle="collapse" href="#collapse_jurisdiction" role="button" aria-expanded="true" aria-controls="#collapse_jurisdiction">
                            <div class="pull-left">
                                <h4>Jurisdiction</h4>
                            </div>
                            <div class="pull-right">
                                <h4><i class="fas fa-chevron-circle-down"></i></h4>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="collapse filter_collapse" id="collapse_jurisdiction">

                        {% for jurisdiction in jurisdictions %}
                        <div class="checkbox">
                            <label><input type="checkbox" name="flt_jurisdiction" value={{jurisdiction['Name']}}>{{jurisdiction['Name']}}   ({{jurisdiction['Count']}})  ({{jurisdiction['MEC_Sum']}}MW)</label>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </form>
            </div>
        </div>
    </div>

        <div class="container col-xs-12 col-sm-8 col-sm-offset-1 col-md-7 asset_table">
            <div class="row">
                <div class="col-xs-4">
                    <p>Showing {{doc_count}} assets</p>
                    <p>Total MEC of {{mec_total}}MW</p>
                </div>
            </div>
            <div class="row table_heading">
                <div class="col-xs-4 col_header">Name</div>
                <div class="col-xs-3 col_header">Type</div>
                <div class="col-xs-2 col-sm-3 col_header">MEC (MW)</div>
                <div class="col-xs-1 col_header">Details</div>
                <div class="col-md-1 col_header hidden-sm">Edit</div>
            </div>
            {% for asset in assets %}
            <div class="table_row_container">
                <div class="row">
                    <a data-toggle="collapse" href="#collapse{{asset._id}}" role="button" aria-expanded="false" aria-controls="collapse{{asset._id}}">
                        <div class="col-xs-4 row_attr">{{asset.Name}}</div>
                        <div class="col-xs-3 row_attr ">{{asset.Type}}</div>
                        <div class="col-xs-2 col-sm-3 row_attr">{{asset.MEC_MW}}</div>
                        <div class="col-xs-1">
                            <i class="fas fa-chevron-circle-down"></i>
                        </div>
                    </a>
                    <div class="col-md-1 row_attr  hidden-sm">
                        <a href="{{url_for('edit_asset', asset_id = asset._id)}}"><i class="edit_icon fas fa-cog"></i></a>
                    </div>
                  
                </div>
                <div class="collapse asset_details_collapse col-xs-12" id="collapse{{asset._id}}">
                    <div class="card card-body">
                        {% for attribute in attributes %}

                        {% if attribute in asset and asset[attribute] != 'NA' %}
                        <p>{{attribute}} - {{asset[attribute]}}</p>
                        {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>

            {% endfor %}

        </div>




        {% endblock %}
